<!--- GENERATED BY gomplate from scripts/docs/templates/monitor-page.md.tmpl --->

# pcf-firehose-nozzle

Monitor Type: `pcf-firehose-nozzle` ([Source](https://github.com/signalfx/signalfx-agent/tree/master/pkg/monitors/cloudfoundry))

**Accepts Endpoints**: No

**Multiple Instances Allowed**: Yes

## Overview

This is a CloudFoundry [firehose
nozzle](https://docs.pivotal.io/tiledev/2-8/nozzle.html) by connecting to
the Cloud Foundry Reverse Log Proxy (RLP) Gateway that feeds metrics from
the Loggregator. This uses the new RLP Gateway model that was [introduced
in Pivotal Cloud Foundry (PCF)
2.4](https://docs.pivotal.io/tiledev/2-4/release-notes.html#log-api), so it
will not work with older releases.

It supports `gauge` and `counter` metrics at this time.  All of the `tags` in
the firehose envelopes will be converted to dimensions when sending to
SignalFx.


## Configuration

To activate this monitor in the Smart Agent, add the following to your
agent config:

```
monitors:  # All monitor config goes under this key
 - type: pcf-firehose-nozzle
   ...  # Additional config
```

**For a list of monitor options that are common to all monitors, see [Common
Configuration](../monitor-config.md#common-configuration).**


| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `rlpGatewayUrl` | no | `string` | The base URL to the RLP Gateway server. This is quite often of the form https://log-stream.<CLOUD CONTROLLER SYSTEM DOMAIN> if using PCF 2.4+. |
| `rlpGatewaySkipVerify` | no | `bool` | Whether to skip SSL/TLS verification when using HTTPS to connect to the RLP Gateway (**default:** `false`) |
| `uaaUser` | no | `string` | The UAA username for a user that has the appropriate authority to fetch logs from the firehose (usually the `logs.admin` authority) |
| `uaaPassword` | no | `string` | The password for the above UAA user |
| `uaaUrl` | no | `string` | The URL to the UAA server. This monitor will obtain an access token from this server that it will use to authenticate with the RLP Gateway. |
| `uaaSkipVerify` | no | `bool` | Whether to skip SSL/TLS verification when using HTTPS to connect to the UAA server (**default:** `false`) |
| `shardId` | no | `string` | The nozzle's shard id.  All nozzle instances with the same id will receive an exclusive subset of the data from the firehose. The default should suffice in the vast majority of use cases. (**default:** `signalfx_nozzle`) |



The agent does not do any built-in filtering of metrics coming out of this
monitor.
## Dimensions

The following dimensions may occur on metrics emitted by this monitor.  Some
dimensions may be specific to certain metrics.

| Name | Description |
| ---  | ---         |
| `instance_id` | The BOSH instance id that pertains to the metric, if any. |
| `source_id` | The source of the metric |



